---
// BrandAccordion.astro - Modern Accordion Component
interface Props {
  brands: Array<{
    name: string;
    icon: string;
    color: string;
    services: string[];
    link: string;
  }>;
}

const { brands } = Astro.props;
---

<section class="py-16 bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900">
  <div class="container mx-auto px-6">
    <div class="text-center mb-12">
      <h2 class="text-4xl font-bold text-white mb-4">Marka Servislerimiz</h2>
      <p class="text-gray-300 text-lg">Her marka için uzman kadromuzla özel çözümler</p>
    </div>

    <div class="max-w-4xl mx-auto space-y-4">
      {brands.map((brand, index) => (
        <div class="accordion-item" data-brand={brand.name.toLowerCase()}>
          <button 
            class="accordion-header w-full flex items-center justify-between p-6 bg-white/10 backdrop-blur-md rounded-xl border border-white/20 hover:bg-white/20 transition-all duration-300 group"
            onclick={`toggleAccordion('${brand.name.toLowerCase()}')`}
          >
            <div class="flex items-center gap-4">
              <!-- Marka İkonu -->
              <div class={`w-16 h-16 ${brand.color} rounded-xl flex items-center justify-center transform transition-transform group-hover:scale-110`}>
                <img src={brand.icon} alt={brand.name} class="w-10 h-10 object-contain filter brightness-0 invert" />
              </div>
              
              <!-- Marka Adı -->
              <div class="text-left">
                <h3 class="text-2xl font-bold text-white">{brand.name}</h3>
                <p class="text-gray-300 text-sm">Özel servis çözümleri</p>
              </div>
            </div>
            
            <!-- Accordion Arrow -->
            <div class="accordion-arrow transform transition-transform duration-300">
              <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
              </svg>
            </div>
          </button>
          
          <!-- Accordion Content -->
          <div id={brand.name.toLowerCase()} class="accordion-content hidden">
            <div class="p-6 bg-white/5 backdrop-blur-sm rounded-b-xl border-t-0 border border-white/20">
              <div class="grid md:grid-cols-2 gap-6">
                <!-- Hizmetler Listesi -->
                <div>
                  <h4 class="text-lg font-semibold text-white mb-4">Hizmetlerimiz</h4>
                  <ul class="space-y-2">
                    {brand.services.map((service) => (
                      <li class="flex items-center gap-2 text-gray-300">
                        <svg class="w-4 h-4 text-green-400" fill="currentColor" viewBox="0 0 20 20">
                          <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                        </svg>
                        {service}
                      </li>
                    ))}
                  </ul>
                </div>
                
                <!-- Görsel ve CTA -->
                <div class="flex flex-col items-center justify-center">
                  <div class="w-full h-32 bg-gradient-to-br from-white/10 to-white/5 rounded-lg mb-4 flex items-center justify-center">
                    <img src={`/images/${brand.name.toLowerCase()}-service.webp`} alt={`${brand.name} Servis`} class="max-h-full object-contain" />
                  </div>
                  <a 
                    href={brand.link} 
                    class="inline-flex items-center gap-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white px-6 py-3 rounded-lg font-semibold hover:from-orange-600 hover:to-orange-700 transition-all duration-300 transform hover:scale-105"
                  >
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                    </svg>
                    Detaylı Bilgi
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

<script>
  function toggleAccordion(brandName) {
    const content = document.getElementById(brandName);
    const header = content.previousElementSibling;
    const arrow = header.querySelector('.accordion-arrow');
    
    // Tüm diğer accordion'ları kapat
    document.querySelectorAll('.accordion-content').forEach(item => {
      if (item.id !== brandName) {
        item.classList.add('hidden');
        item.previousElementSibling.querySelector('.accordion-arrow').style.transform = 'rotate(0deg)';
      }
    });
    
    // Mevcut accordion'u toggle et
    content.classList.toggle('hidden');
    arrow.style.transform = content.classList.contains('hidden') ? 'rotate(0deg)' : 'rotate(180deg)';
  }
</script>

<style>
  .accordion-item {
    position: relative;
    overflow: hidden;
  }
  
  .accordion-item::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
    transition: left 0.5s;
  }
  
  .accordion-item:hover::before {
    left: 100%;
  }
</style>