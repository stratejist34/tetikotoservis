---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';

// ‚úÖ YENƒ∞: Schema component'leri
import LocalBusinessSchema from '../../components/LocalBusinessSchema.astro';
import FAQSchema from '../../components/FAQSchema.astro';
import BreadcrumbSchema from '../../components/BreadcrumbSchema.astro';

// CSS i√ßin smooth scroll ve blog stilleri
const smoothScrollCSS = `
  html {
    scroll-behavior: smooth;
  }
  .prose h2 {
    scroll-margin-top: 5rem;
  }
  .prose h2[id] {
    scroll-margin-top: 5rem;
  }
`;

// Blog stilleri - CTA box, tablo, review card vb.
const blogStyles = `
  /* CTA Box */
  .cta-box {
    background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
    border: 2px solid #1e3a8a;
    padding: 20px;
    border-radius: 8px;
    margin: 20px 0;
    text-align: center;
    box-shadow: 0 4px 12px rgba(30, 58, 138, 0.15);
  }
  .cta-box strong {
    display: block;
    margin-bottom: 12px;
    font-size: 1.1rem;
    color: #1e3a8a;
    font-weight: 700;
  }
  .cta-actions {
    display: flex;
    gap: 12px;
    justify-content: center;
    flex-wrap: wrap;
  }
  .cta-actions a {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 12px 20px;
    border-radius: 6px;
    text-decoration: none;
    font-weight: 600;
    transition: all 0.3s;
  }
  .cta-call {
    background: linear-gradient(135deg, #1e3a8a 0%, #2563eb 100%);
    color: #fff;
    border: 2px solid #1e3a8a;
  }
  .cta-call:hover {
    background: linear-gradient(135deg, #2563eb 0%, #1e3a8a 100%);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(30, 58, 138, 0.4);
  }
  .cta-whatsapp {
    background: linear-gradient(135deg, #25d366 0%, #1ebd58 100%);
    color: #fff;
    border: 2px solid #25d366;
  }
  .cta-whatsapp:hover {
    background: linear-gradient(135deg, #1ebd58 0%, #25d366 100%);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(37, 211, 102, 0.4);
  }
  .cta-map {
    background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
    color: #fff;
    border: 2px solid #1e3a8a;
  }
  .cta-map:hover {
    background: linear-gradient(135deg, #3b82f6 0%, #1e3a8a 100%);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(30, 58, 138, 0.5);
  }
  
  /* Uzman Tavsiyesi */
  .uzman-tavsiyesi {
    background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
    border-left: 4px solid #1e3a8a;
    padding: 15px;
    margin: 20px 0;
    font-size: 0.95rem;
    line-height: 1.6;
    color: #1e3a8a;
    font-weight: 500;
  }
  
  /* Info Box */
  .info-box {
    background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
    border: 2px solid #1e3a8a;
    padding: 16px;
    border-radius: 8px;
    margin: 20px 0;
    box-shadow: 0 2px 8px rgba(30, 58, 138, 0.1);
  }
  
  /* Tablo Stilleri */
  table {
    width: 100%;
    border-collapse: collapse;
    margin: 20px 0;
    border: 1px solid #e5e7eb;
  }
  thead tr {
    background: #f8fafc;
  }
  th {
    border: 1px solid #e5e7eb;
    padding: 12px;
    text-align: left;
    font-weight: 600;
    background: #f8fafc;
  }
  td {
    border: 1px solid #e5e7eb;
    padding: 12px;
    text-align: left;
    vertical-align: top;
  }
  tbody tr:nth-child(even) {
    background: #fcfdff;
  }
  tbody tr:hover {
    background: #eff6ff;
  }
  
  /* M√º≈üteri Yorumlarƒ± */
  .review-card {
    display: flex;
    align-items: center;
    background: #fff;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    padding: 16px;
    margin: 16px 0;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  }
  .review-avatar {
    color: white;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    margin-right: 12px;
    flex-shrink: 0;
  }
  .review-content {
    flex: 1;
  }
  .review-meta {
    display: flex;
    align-items: center;
    margin-bottom: 4px;
  }
  .review-meta strong {
    margin-right: 8px;
  }
  .review-stars {
    color: #fbbf24;
    margin-right: 8px;
  }
  .review-date {
    color: #666;
    font-size: 12px;
  }
  .review-text {
    margin: 0;
    color: #333;
    line-height: 1.6;
  }
  
  /* Check List */
  .check-list {
    list-style: none;
    padding: 0;
    margin: 20px 0;
    background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
    border: 1px solid #1e3a8a;
    border-radius: 8px;
    padding: 20px;
  }
  .check-list li {
    padding: 8px 0 8px 28px;
    position: relative;
    line-height: 1.6;
  }
  .check-list li:before {
    content: "‚úÖ";
    position: absolute;
    left: 0;
    font-size: 1.2rem;
  }
  
  /* Responsive */
  @media (max-width: 768px) {
    table {
      display: block;
      overflow-x: auto;
      white-space: nowrap;
    }
    .review-card {
      flex-direction: column;
      text-align: center;
    }
    .review-avatar {
      margin: 0 auto 12px;
    }
    .cta-actions {
      flex-direction: column;
    }
    .cta-actions a {
      width: 100%;
      justify-content: center;
    }
  }
`;

export async function getStaticPaths() {
  const blogEntries = await getCollection('blog', ({ data }) => {
    return data.draft !== true;
  });
  
  console.log('Blog entries found:', blogEntries.length);
  console.log('Blog entry slugs:', blogEntries.map(entry => entry.slug));
  
  return blogEntries.map(entry => ({
    params: { slug: entry.slug },
    props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();

// ‚úÖ YENƒ∞: Schema i√ßin gerekli deƒüi≈ükenler
const currentUrl = `${Astro.site || 'https://hyundaiservisim.com'}/blog/${entry.slug}`;

const breadcrumbItems = [
  { name: 'Anasayfa', url: 'https://hyundaiservisim.com' },
  { name: 'Blog', url: '/blog' },
  { name: entry.data.title, url: `/blog/${entry.slug}` }
];

const faqs = [
  {
    question: `${entry.data.title.split(' ')[0]} ne kadar tutar?`,
    answer: `${entry.data.title} hakkƒ±nda detaylƒ± bilgi i√ßin yazƒ±mƒ±zƒ± okuyabilirsiniz. Randevu: 0533 615 7835`
  },
  {
    question: "Randevu almak zorunlu mu?",
    answer: "Randevu almanƒ±zƒ± √∂neririz ancak zorunlu deƒüildir. Randevu ile bekleme s√ºrenizi minimuma indirebilirsiniz."
  }
];

// Manuel ba≈ülƒ±k √ßƒ±karma - geli≈ütirilmi≈ü versiyon
const headings = [];
const content = await entry.body;
const lines = content.split('\n');

for (const line of lines) {
  const trimmedLine = line.trim();
  if (trimmedLine.startsWith('##') && !trimmedLine.startsWith('###')) {
    const text = trimmedLine.replace(/^#+\s*/, '').replace(/[!?.]+$/, '');
    
    // ‚úÖ T√ºrk√ße karakterleri √ßevir
    const turkishMap = {
      '√ß': 'c', '√á': 'c',
      'ƒü': 'g', 'ƒû': 'g',
      'ƒ±': 'i', 'ƒ∞': 'i',
      '√∂': 'o', '√ñ': 'o',
      '≈ü': 's', '≈û': 's',
      '√º': 'u', '√ú': 'u'
    };
    
    // Daha g√ºvenilir slug olu≈üturma
    let slug = text.toLowerCase();
    
    // T√ºrk√ße karakterleri deƒüi≈ütir
    Object.keys(turkishMap).forEach(key => {
      slug = slug.replace(new RegExp(key, 'g'), turkishMap[key]);
    });
    
    // Temizle
    slug = slug
      .replace(/[^a-z0-9\s-]/g, '') // √ñzel karakterleri kaldƒ±r
      .replace(/\s+/g, '-') // Bo≈üluklarƒ± tire ile deƒüi≈ütir
      .replace(/-+/g, '-') // √áoklu tireleri tek tire yap
      .replace(/^-|-$/g, '') // Ba≈üta ve sonda tire varsa kaldƒ±r
      .trim();
    
    headings.push({
      depth: 2,
      slug: slug,
      text: text
    });
  }
}

console.log('Manuel headings:', headings);

// Ba≈ülƒ±klara ID eklemek i√ßin JavaScript
const addHeadingIdsScript = `
document.addEventListener('DOMContentLoaded', function() {
  const headings = ${JSON.stringify(headings)};
  
  headings.forEach(heading => {
    // H2 ba≈ülƒ±klarƒ±nƒ± bul
    const h2Elements = document.querySelectorAll('h2');
    h2Elements.forEach(h2 => {
      const text = h2.textContent.trim();
      if (text === heading.text) {
        h2.id = heading.slug;
        h2.scrollMarginTop = '5rem';
      }
    });
  });
  
  // TOC linklerine tƒ±klama event'i
  const tocLinks = document.querySelectorAll('.toc-link');
  tocLinks.forEach(link => {
    link.addEventListener('click', function(e) {
      // Varsayƒ±lan davranƒ±≈üƒ± iptal etme
      // e.preventDefault();
      
      // T√ºm linklerden active class'ƒ± kaldƒ±r
      tocLinks.forEach(l => l.classList.remove('active'));
      
      // Tƒ±klanan linke active class ekle
      this.classList.add('active');
    });
  });
  
  // Scroll olayƒ±nda aktif b√∂l√ºm√º g√ºncelle
  const observerOptions = {
    rootMargin: '-100px 0px -80% 0px',
    threshold: 0
  };
  
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const id = entry.target.getAttribute('id');
        tocLinks.forEach(link => {
          link.classList.remove('active');
          if (link.getAttribute('href') === '#' + id) {
            link.classList.add('active');
          }
        });
      }
    });
  }, observerOptions);
  
  // T√ºm h2 ba≈ülƒ±klarƒ±nƒ± g√∂zlemle
  const h2Elements = document.querySelectorAll('h2[id]');
  h2Elements.forEach(h2 => observer.observe(h2));
});
`;
---

<Layout title={entry.data.title} description={entry.data.description}>
  
  <!-- ‚úÖ YENƒ∞: Schema'lar -->
  <LocalBusinessSchema 
    title={entry.data.title}
    description={entry.data.description}
    url={currentUrl}
    pubDate={entry.data.pubDate}
    date={entry.data.date}
  />
  
  <FAQSchema faqs={faqs} />
  
  <BreadcrumbSchema items={breadcrumbItems} />
  
  <!-- Smooth scroll styles -->
  <style set:html={smoothScrollCSS}></style>
  <style set:html={blogStyles}></style>

  <Header />
  
  <main>
    <article>
      <div class="container mx-auto px-4 py-8">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
          <!-- Sol: ƒ∞√ßerik -->
          <div class="lg:col-span-2">
            <div class="mb-6">
              <!-- Breadcrumb -->
              <nav class="text-sm text-gray-600 mb-4">
                <a href="/" class="hover:text-primary transition-colors">Anasayfa</a>
                <span class="mx-2">/</span>
                <a href="/blog" class="hover:text-primary transition-colors">Blog</a>
                <span class="mx-2">/</span>
                <span class="text-gray-900 font-medium">{entry.data.title}</span>
              </nav>

              <!-- Ba≈ülƒ±k -->
              <h1 class="text-3xl md:text-4xl lg:text-5xl font-bold text-slate-800 leading-tight mb-6">
                {entry.data.title}
              </h1>
              
              <!-- Meta Bilgileri -->
              <div class="flex flex-wrap items-center gap-4 text-sm text-gray-600 mb-8 pb-8 border-b border-gray-200">
                {(entry.data.pubDate || entry.data.date) && (
                  <div class="flex items-center gap-2">
                    <svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                    </svg>
                    <time datetime={(entry.data.pubDate || entry.data.date).toISOString()}>
                      {new Date(entry.data.pubDate || entry.data.date).toLocaleDateString('tr-TR', {
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric'
                      })}
                    </time>
                  </div>
                )}
                
                {entry.data.author && (
                  <div class="flex items-center gap-2">
                    <svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                    </svg>
                    <span>{entry.data.author}</span>
                  </div>
                )}
                
                {(entry.data.category || (entry.data.categories && entry.data.categories.length > 0)) && (
                  <div class="flex items-center gap-2">
                    <svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path>
                    </svg>
                    <span class="capitalize">
                      {entry.data.category || (entry.data.categories && entry.data.categories[0])}
                    </span>
                  </div>
                )}
              </div>

              <!-- Featured Image -->
              {(entry.data.image || entry.data.coverImage) && (
                <div class="mb-8 rounded-2xl overflow-hidden shadow-lg">
                  <img 
                    src={entry.data.image || entry.data.coverImage} 
                    alt={entry.data.alt || entry.data.title}
                    class="w-full h-auto object-cover"
                    loading="eager"
                  />
                </div>
              )}
            </div>

            <!-- Blog ƒ∞√ßeriƒüi -->
            <div class="prose prose-lg prose-slate max-w-none
                        prose-headings:font-bold prose-headings:text-slate-800
                        prose-h2:text-2xl prose-h2:mt-12 prose-h2:mb-6 prose-h2:pb-3 prose-h2:border-b prose-h2:border-gray-200
                        prose-h3:text-xl prose-h3:mt-8 prose-h3:mb-4
                        prose-p:text-gray-700 prose-p:leading-relaxed prose-p:mb-6
                        prose-a:text-primary prose-a:no-underline hover:prose-a:text-accent hover:prose-a:underline
                        prose-strong:text-slate-900 prose-strong:font-semibold
                        prose-ul:my-6 prose-ul:list-disc prose-ul:pl-6
                        prose-ol:my-6 prose-ol:list-decimal prose-ol:pl-6
                        prose-li:text-gray-700 prose-li:mb-2
                        prose-blockquote:border-l-4 prose-blockquote:border-primary prose-blockquote:pl-4 prose-blockquote:italic prose-blockquote:text-gray-600
                        prose-code:bg-gray-100 prose-code:px-2 prose-code:py-1 prose-code:rounded prose-code:text-sm prose-code:text-primary
                        prose-pre:bg-slate-800 prose-pre:text-gray-100">
              <Content />
            </div>

            <!-- Etiketler -->
            {entry.data.tags && entry.data.tags.length > 0 && (
              <div class="mt-12 pt-8 border-t border-gray-200">
                <h3 class="text-lg font-bold text-slate-800 mb-4 flex items-center gap-2">
                  <svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path>
                  </svg>
                  Etiketler
                </h3>
                <div class="flex flex-wrap gap-2">
                  {entry.data.tags.map((tag: string) => (
                    <span class="bg-primary/10 text-primary px-4 py-2 rounded-full text-sm font-medium hover:bg-primary/20 transition-colors">
                      #{tag}
                    </span>
                  ))}
                </div>
              </div>
            )}


            <!-- CTA -->
            <div class="mt-12 relative overflow-hidden bg-gradient-to-br from-primary via-blue-700 to-primary-dark rounded-3xl p-10 text-center shadow-2xl">
              <!-- Background Pattern -->
              <div class="absolute inset-0 opacity-10">
                <div class="absolute inset-0" style="background-image: radial-gradient(circle at 1px 1px, white 1px, transparent 0); background-size: 20px 20px;"></div>
              </div>
              
              <!-- Content -->
              <div class="relative z-10">
                <div class="inline-block mb-6">
                  <div class="flex items-center justify-center w-20 h-20 bg-white/20 backdrop-blur-sm rounded-2xl">
                    <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                  </div>
                </div>
                
                <h3 style="color: #ffffff !important;" class="text-3xl md:text-4xl font-bold mb-4 text-white">
                  Aracƒ±nƒ±z ƒ∞√ßin Randevu Alƒ±n
                </h3>
                <p style="color: #bfdbfe !important;" class="text-lg text-blue-100 mb-8 max-w-2xl mx-auto">
                  Uzman ekibimiz size yardƒ±mcƒ± olmaya hazƒ±r. 7/24 hizmetinizdeyiz.
                </p>
                
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                  <a 
                    href="tel:05336157835"
                    class="inline-flex items-center gap-3 bg-white text-primary px-8 py-4 rounded-xl font-bold text-lg transition-all hover:scale-105 hover:shadow-2xl shadow-lg"
                  >
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
                    </svg>
                    Hemen Ara
                  </a>
                  
                  <a 
                    href="/iletisim"
                    class="inline-flex items-center gap-3 bg-white/10 backdrop-blur-sm text-white border-2 border-white px-8 py-4 rounded-xl font-bold text-lg transition-all hover:bg-white/20 hover:scale-105"
                  >
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                    </svg>
                    Randevu Al
                  </a>
                </div>
                
                <div class="mt-6 text-blue-200 text-sm">
                  üìç Tuzla K√º√ß√ºk Oto Sanayi Sitesi, B 2 Blok No:117 Tuzla/ƒ∞stanbul
                </div>
              </div>
            </div>

            <!-- Diƒüer Hizmetlerimiz -->
            <div class="mt-16">
              <h3 class="text-2xl font-bold text-slate-800 mb-8 text-center">Diƒüer Hizmetlerimiz</h3>
              <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <!-- Hyundai Servis -->
                <div class="bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden hover:shadow-lg transition-shadow">
                  <div class="aspect-video bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center">
                    <img src="/images/logolar/hyundai.webp" alt="Hyundai Servis" class="w-16 h-16 object-contain">
                  </div>
                  <div class="p-4">
                    <h4 class="font-bold text-slate-800 mb-2">Hyundai Servis</h4>
                    <p class="text-gray-600 text-sm mb-3">T√ºm Hyundai modelleri i√ßin profesyonel servis hizmeti</p>
                    <a href="/gebze-hyundai-servis" class="text-primary hover:text-accent text-sm font-semibold">
                      Detaylar ‚Üí
                    </a>
                  </div>
                </div>

                <!-- Kia Servis -->
                <div class="bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden hover:shadow-lg transition-shadow">
                  <div class="aspect-video bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center">
                    <img src="/images/logolar/kia.webp" alt="Kia Servis" class="w-16 h-16 object-contain">
                  </div>
                  <div class="p-4">
                    <h4 class="font-bold text-slate-800 mb-2">Kia Servis</h4>
                    <p class="text-gray-600 text-sm mb-3">Kia modelleri i√ßin uzman servis √ß√∂z√ºmleri</p>
                    <a href="/kia-ozel-servis-gebze-tuzla" class="text-primary hover:text-accent text-sm font-semibold">
                      Detaylar ‚Üí
                    </a>
                  </div>
                </div>

                <!-- Toyota Servis -->
                <div class="bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden hover:shadow-lg transition-shadow">
                  <div class="aspect-video bg-gradient-to-br from-red-500 to-red-600 flex items-center justify-center">
                    <img src="/images/logolar/toyota.webp" alt="Toyota Servis" class="w-16 h-16 object-contain">
                  </div>
                  <div class="p-4">
                    <h4 class="font-bold text-slate-800 mb-2">Toyota Servis</h4>
                    <p class="text-gray-600 text-sm mb-3">Toyota ara√ßlarƒ± i√ßin g√ºvenilir servis hizmeti</p>
                    <a href="/gebze-toyota-servis" class="text-primary hover:text-accent text-sm font-semibold">
                      Detaylar ‚Üí
                    </a>
                  </div>
                </div>

                <!-- Nissan Servis -->
                <div class="bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden hover:shadow-lg transition-shadow">
                  <div class="aspect-video bg-gradient-to-br from-orange-500 to-orange-600 flex items-center justify-center">
                    <img src="/images/logolar/nissan.webp" alt="Nissan Servis" class="w-16 h-16 object-contain">
                  </div>
                  <div class="p-4">
                    <h4 class="font-bold text-slate-800 mb-2">Nissan Servis</h4>
                    <p class="text-gray-600 text-sm mb-3">Nissan modelleri i√ßin profesyonel bakƒ±m</p>
                    <a href="/gebze-nissan-servis" class="text-primary hover:text-accent text-sm font-semibold">
                      Detaylar ‚Üí
                    </a>
                  </div>
                </div>
              </div>
            </div>

            <!-- Geri D√∂n -->
            <div class="mt-8 text-center">
              <a 
                href="/blog" 
                class="inline-flex items-center gap-2 text-primary hover:text-accent transition-colors font-semibold"
              >
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                </svg>
                T√ºm Blog Yazƒ±larƒ±
              </a>
            </div>
          </div>

          <!-- Saƒü: ƒ∞√ßindekiler (Table of Contents) -->
          <div class="lg:col-span-1 lg:sticky lg:top-24">
            <div class="bg-white rounded-xl p-6 shadow-md border border-gray-100">
              <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center gap-2">
                <svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16"></path>
                </svg>
                ƒ∞√ßindekiler
              </h3>
              <nav>
                <ul class="space-y-2">
                  {headings && headings.map(heading => (
                    <li>
                      <a href={`#${heading.slug}`} 
                         class="toc-link text-primary hover:text-accent transition-colors text-sm font-medium block cursor-pointer py-1 px-2 rounded hover:bg-primary/5 border-l-2 border-transparent hover:border-primary active:bg-primary/10 active:border-primary">
                        {heading.text}
                      </a>
                    </li>
                  ))}
                </ul>
              </nav>
            </div>
          </div>
        </div>
      </div>
    </article>
  </main>

  <Footer />
  
  <!-- TOC JavaScript -->
  <script set:html={addHeadingIdsScript}></script>
</Layout>

<style>
  /* Markdown i√ßeriƒüi i√ßin √∂zel stiller */
  article :global(img) {
    margin: 2rem auto;
    max-width: 100%;
    height: auto;
  }

  article :global(table) {
    width: 100%;
    border-collapse: collapse;
    margin: 2rem 0;
  }

  article :global(th),
  article :global(td) {
    padding: 0.75rem;
    border: 1px solid #e5e7eb;
    text-align: left;
  }

  article :global(th) {
    background-color: #f9fafb;
    font-weight: 600;
  }

  article :global(code) {
    background-color: #f3f4f6;
    padding: 0.2rem 0.4rem;
    border-radius: 0.25rem;
    font-size: 0.875em;
  }

  article :global(pre) {
    background-color: #1e293b;
    color: #e2e8f0;
    padding: 1rem;
    border-radius: 0.5rem;
    overflow-x: auto;
    margin: 1.5rem 0;
  }

  article :global(pre code) {
    background-color: transparent;
    padding: 0;
    color: inherit;
  }
  
  /* TOC aktif link stilleri */
  .toc-link.active {
    background-color: rgb(59 130 246 / 0.1);
    border-left-color: rgb(59 130 246);
    color: rgb(59 130 246);
    font-weight: 600;
  }
</style>
