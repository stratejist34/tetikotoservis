---
/**
 * QuickActionBar - Åžimdi "Aksiyon Merkezi" (Action Hub) Hibrit YapÄ±sÄ±
 *
 * ðŸ“Š TasarÄ±m Stratejisi:
 * - MasaÃ¼stÃ¼: Hero altÄ±nda statik, prestijli aksiyon barÄ±.
 * - Mobil: SaÄŸ altta yÃ¼zen (floating) premium buton + TÄ±klandÄ±ÄŸÄ±nda aÃ§Ä±lan ferah Aksiyon Merkezi.
 * - S21 FE gibi cihazlarda sÄ±kÄ±ÅŸÄ±klÄ±ÄŸÄ± Ã¶nlemek iÃ§in "Drawer / Bottom Sheet" mantÄ±ÄŸÄ±na geÃ§ildi.
 */
---

<!-- DESKTOP BAR: Sadece masaÃ¼stÃ¼ ve tabletlerde gÃ¶rÃ¼nÃ¼r -->
<div
    id="quick-action-bar-desktop"
    class="hidden md:block relative z-40 bg-slate-950/90 backdrop-blur-2xl border-y border-white/10"
>
    <div class="container mx-auto px-4 py-5">
        <div class="flex items-center justify-center gap-8">
            <!-- Motor ArÄ±zasÄ± -->
            <a
                href="https://wa.me/905336157835?text=Merhaba,%20aracÄ±mda%20bir%20arÄ±za%20uyarÄ±sÄ±%20var,%20arÄ±za%20tespiti%20iÃ§in%20randevu/bilgi%20almak%20istiyorum."
                target="_blank"
                class="quick-action-item group relative flex items-center gap-4 px-8 py-3.5 rounded-2xl bg-slate-900/60 border border-orange-500/40 hover:border-orange-500/80 transition-all duration-500 hover:-translate-y-1.5"
                data-action="Motor ArÄ±zasÄ±"
            >
                <div
                    class="w-11 h-11 bg-orange-500/30 rounded-xl flex items-center justify-center border border-orange-500/40 group-hover:scale-110 transition-all"
                >
                    <svg
                        class="w-6 h-6 text-orange-400"
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2.5"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        ><path
                            d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"
                        ></path></svg
                    >
                </div>
                <div class="flex flex-col items-start leading-tight">
                    <span
                        class="text-[10px] text-orange-400 font-button tracking-[0.2em] uppercase mb-0.5"
                        >ARIZA TESPÄ°T</span
                    >
                    <span
                        class="text-sm font-button tracking-widest text-white font-bold uppercase"
                        >Motor ArÄ±zasÄ±</span
                    >
                </div>
            </a>

            <!-- Periyodik BakÄ±m -->
            <a
                href="https://wa.me/905336157835?text=Merhaba,%20aracÄ±mÄ±n%20periyodik%20bakÄ±mÄ±%20(yaÄŸ/filtre)%20iÃ§in%20fiyat%20ve%20randevu%20bilgisi%20alabilir%20miyim?"
                target="_blank"
                class="quick-action-item group relative flex items-center gap-4 px-8 py-3.5 rounded-2xl bg-slate-900/60 border border-blue-500/40 hover:border-blue-500/80 transition-all duration-500 hover:-translate-y-1.5"
                data-action="Periyodik BakÄ±m"
            >
                <div
                    class="w-11 h-11 bg-blue-500/30 rounded-xl flex items-center justify-center border border-blue-500/40 group-hover:scale-110 transition-all"
                >
                    <svg
                        class="w-6 h-6 text-blue-400"
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2.5"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        ><path
                            d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"
                        ></path><circle cx="12" cy="12" r="3"></circle></svg
                    >
                </div>
                <div class="flex flex-col items-start leading-tight">
                    <span
                        class="text-[10px] text-blue-400 font-button tracking-[0.2em] uppercase mb-0.5"
                        >FULL KONTROL</span
                    >
                    <span
                        class="text-sm font-button tracking-widest text-white font-bold uppercase"
                        >Periyodik BakÄ±m</span
                    >
                </div>
            </a>

            <!-- Hemen Sor -->
            <a
                href="tel:05336157835"
                class="quick-action-item group relative flex items-center gap-4 px-8 py-3.5 rounded-2xl bg-slate-900/60 border border-green-500/40 hover:border-green-500/80 transition-all duration-500 hover:-translate-y-1.5"
                data-action="Hemen Sor"
            >
                <div
                    class="w-11 h-11 bg-green-500/30 rounded-xl flex items-center justify-center border border-green-500/40 group-hover:scale-110 transition-all"
                >
                    <svg
                        class="w-6 h-6 text-green-400"
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2.5"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        ><path
                            d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"
                        ></path></svg
                    >
                </div>
                <div class="flex flex-col items-start leading-tight">
                    <span
                        class="text-[10px] text-green-400 font-button tracking-[0.2em] uppercase mb-0.5"
                        >USTAYA BAÄžLAN</span
                    >
                    <span
                        class="text-sm font-button tracking-widest text-white font-bold uppercase"
                        >Hemen Sor</span
                    >
                </div>
            </a>
        </div>
    </div>
</div>

<!-- MOBILE HUB: Sadece mobil ve kÃ¼Ã§Ã¼k tabletlerde gÃ¶rÃ¼nÃ¼r -->
<div id="quick-action-hub-mobile" class="md:hidden">
    <!-- Dynamic Tooltip (KonuÅŸma Balonu) -->
    <div
        id="hub-tooltip"
        class="fixed bottom-24 right-6 bg-white text-slate-900 px-4 py-2 rounded-2xl text-[11px] font-bold shadow-2xl z-[46] opacity-0 translate-y-4 pointer-events-none transition-all duration-500 whitespace-nowrap border border-slate-100"
    >
        <span id="tooltip-text">Hemen Ara</span>
        <!-- Tooltip Ok Ä°ÅŸareti -->
        <div
            class="absolute bottom-[-6px] right-6 w-3 h-3 bg-white rotate-45 border-r border-b border-slate-100"
        >
        </div>
    </div>

    <!-- Floating Trigger Button -->
    <button
        id="hub-trigger"
        class="fixed bottom-6 right-4 w-16 h-16 bg-orange-600 text-white rounded-2xl shadow-[0_20px_40px_-10px_rgba(234,88,12,0.5)] border border-orange-500/50 z-[45] flex items-center justify-center transition-all duration-500 hover:scale-110 active:scale-95 group overflow-hidden"
        aria-label="Ä°letiÅŸim ve Destek"
    >
        <!-- Glossy Parlama Efekti -->
        <span
            class="absolute inset-0 w-full h-full bg-gradient-to-tr from-white/10 to-white/30 skew-x-[-20deg] translate-x-[-150%] group-hover:translate-x-[150%] transition-transform duration-1000"
        ></span>

        <!-- Telefon Ä°konu (Yeni - GerÃ§ekÃ§i Ahize) -->
        <svg
            class="w-8 h-8 hub-icon-open phone-ring"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
        >
            <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2.5"
                d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"
            ></path>
        </svg>

        <!-- Kapat Ä°konu -->
        <svg
            class="w-8 h-8 hub-icon-close hidden"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
        >
            <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2.5"
                d="M6 18L18 6M6 6l12 12"></path>
        </svg>
    </button>

    <!-- Hub Overlay / Drawer -->
    <div
        id="hub-overlay"
        class="fixed inset-0 bg-slate-950/80 backdrop-blur-md z-[44] opacity-0 invisible transition-all duration-500"
    >
        <div
            class="absolute bottom-0 left-0 right-0 max-h-[80vh] bg-slate-900 rounded-t-[2.5rem] border-t border-white/10 p-8 transform translate-y-full transition-transform duration-500 ease-out shadow-[0_-20px_100px_rgba(0,0,0,0.8)]"
        >
            <div class="w-12 h-1.5 bg-white/10 rounded-full mx-auto mb-10">
            </div>

            <h3
                class="text-2xl font-heading text-white mb-8 text-center tracking-widest"
            >
                AKSÄ°YON MERKEZÄ°
            </h3>

            <div class="space-y-4">
                <!-- Motor ArÄ±zasÄ± KartÄ± -->
                <a
                    href="https://wa.me/905336157835?text=Merhaba,%20aracÄ±mda%20bir%20arÄ±za%20uyarÄ±sÄ±%20var,%20arÄ±za%20tespiti%20iÃ§in%20randevu/bilgi%20almak%20istiyorum."
                    target="_blank"
                    class="hub-item flex items-center gap-6 p-6 bg-slate-800/50 border border-orange-500/20 rounded-3xl"
                    data-action="Motor ArÄ±zasÄ±"
                >
                    <div
                        class="w-14 h-14 bg-orange-500/20 rounded-2xl flex items-center justify-center text-orange-500 border border-orange-500/30"
                    >
                        <svg
                            class="w-7 h-7"
                            xmlns="http://www.w3.org/2000/svg"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            ><path
                                d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"
                            ></path></svg
                        >
                    </div>
                    <div>
                        <div
                            class="text-[10px] text-orange-400 font-button tracking-[0.2em] mb-1"
                        >
                            ARIZA TESPÄ°T
                        </div>
                        <div
                            class="text-lg font-bold text-white tracking-widest uppercase"
                        >
                            Motor ArÄ±zasÄ±
                        </div>
                    </div>
                </a>

                <!-- Periyodik BakÄ±m KartÄ± -->
                <a
                    href="https://wa.me/905336157835?text=Merhaba,%20aracÄ±mÄ±n%20periyodik%20bakÄ±mÄ±%20(yaÄŸ/filtre)%20iÃ§in%20fiyat%20ve%20randevu%20bilgisi%20alabilir%20miyim?"
                    target="_blank"
                    class="hub-item flex items-center gap-6 p-6 bg-slate-800/50 border border-blue-500/20 rounded-3xl"
                    data-action="Periyodik BakÄ±m"
                >
                    <div
                        class="w-14 h-14 bg-blue-500/20 rounded-2xl flex items-center justify-center text-blue-500 border border-blue-500/30"
                    >
                        <svg
                            class="w-7 h-7"
                            xmlns="http://www.w3.org/2000/svg"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            ><path
                                d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"
                            ></path><circle cx="12" cy="12" r="3"></circle></svg
                        >
                    </div>
                    <div>
                        <div
                            class="text-[10px] text-blue-400 font-button tracking-[0.2em] mb-1"
                        >
                            FULL KONTROL
                        </div>
                        <div
                            class="text-lg font-bold text-white tracking-widest uppercase"
                        >
                            Periyodik BakÄ±m
                        </div>
                    </div>
                </a>

                <!-- Hemen Sor KartÄ± -->
                <a
                    href="tel:05336157835"
                    class="hub-item flex items-center gap-6 p-6 bg-slate-800/50 border border-green-500/20 rounded-3xl"
                    data-action="Hemen Sor"
                >
                    <div
                        class="w-14 h-14 bg-green-500/20 rounded-2xl flex items-center justify-center text-green-500 border border-green-500/30"
                    >
                        <svg
                            class="w-7 h-7"
                            xmlns="http://www.w3.org/2000/svg"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            ><path
                                d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"
                            ></path></svg
                        >
                    </div>
                    <div>
                        <div
                            class="text-[10px] text-green-400 font-button tracking-[0.2em] mb-1"
                        >
                            USTAYA BAÄžLAN
                        </div>
                        <div
                            class="text-lg font-bold text-white tracking-widest uppercase"
                        >
                            Hemen Sor
                        </div>
                    </div>
                </a>
            </div>

            <button
                id="hub-close"
                class="w-full mt-8 py-4 text-slate-400 font-button text-xs tracking-widest uppercase"
                >Kapat</button
            >
        </div>
    </div>
</div>

<script>
    // Aksiyon Merkezi (Hub) MantÄ±ÄŸÄ±
    const trigger = document.getElementById("hub-trigger");
    const overlay = document.getElementById("hub-overlay");
    const drawer = overlay?.querySelector(".bg-slate-900");
    const closeBtn = document.getElementById("hub-close");
    const iconOpen = trigger?.querySelector(".hub-icon-open");
    const iconClose = trigger?.querySelector(".hub-icon-close");

    function toggleHub() {
        const isOpen = overlay?.classList.contains("invisible");
        if (isOpen) {
            overlay?.classList.remove("invisible", "opacity-0");
            drawer?.classList.remove("translate-y-full");
            iconOpen?.classList.add("hidden");
            iconClose?.classList.remove("hidden");
            document.body.style.overflow = "hidden";

            // Analytics: Aksiyon Merkezi aÃ§Ä±ldÄ±
            if (typeof (window as any).gtag !== "undefined") {
                (window as any).gtag("event", "mobil_aksiyon_merkezi_acildi");
            }
        } else {
            overlay?.classList.add("opacity-0");
            drawer?.classList.add("translate-y-full");
            setTimeout(() => {
                overlay?.classList.add("invisible");
                iconOpen?.classList.remove("hidden");
                iconClose?.classList.add("hidden");
                document.body.style.overflow = "";
            }, 500);
        }
    }

    trigger?.addEventListener("click", toggleHub);
    closeBtn?.addEventListener("click", toggleHub);
    overlay?.addEventListener("click", (e) => {
        if (e.target === overlay) toggleHub();
    });

    // TÄ±klama Takibi (Gtag)
    document
        .querySelectorAll(".quick-action-item, .hub-item")
        .forEach((item) => {
            item.addEventListener("click", () => {
                const actionName = item.getAttribute("data-action");
                const isHubItem = item.classList.contains("hub-item");
                let eventName = "";

                if (isHubItem) {
                    // Mobil Aksiyon Merkezi
                    if (actionName === "Motor ArÄ±zasÄ±")
                        eventName = "mobil_ariza_karti_tiklamasi";
                    else if (actionName === "Periyodik BakÄ±m")
                        eventName = "mobil_bakim_karti_tiklamasi";
                    else if (actionName === "Hemen Sor")
                        eventName = "mobil_arama_karti_tiklamasi";
                } else {
                    // MasaÃ¼stÃ¼ Bar
                    if (actionName === "Motor ArÄ±zasÄ±")
                        eventName = "masaustu_bar_ariza_tiklamasi";
                    else if (actionName === "Periyodik BakÄ±m")
                        eventName = "masaustu_bar_bakim_tiklamasi";
                    else if (actionName === "Hemen Sor")
                        eventName = "masaustu_bar_arama_tiklamasi";
                }

                if (eventName && typeof (window as any).gtag !== "undefined") {
                    (window as any).gtag("event", eventName);
                }
            });
        });

    // DINAMIK TOOLTIP SISTEMI
    const tooltip = document.getElementById("hub-tooltip");
    const tooltipText = document.getElementById("tooltip-text");
    const phrases = [
        "Hemen Ara",
        "Yol Tarifi Al",
        "Randevu Planla",
        "Ustaya Sor",
    ];
    let phraseIndex = 0;

    function showTooltip() {
        if (!tooltip || !tooltipText) return;
        tooltipText.textContent = phrases[phraseIndex];
        tooltip.classList.remove("opacity-0", "translate-y-4");
        tooltip.classList.add("opacity-100", "translate-y-0");

        setTimeout(() => {
            tooltip.classList.add("opacity-0", "translate-y-4");
            tooltip.classList.remove("opacity-100", "translate-y-0");
            phraseIndex = (phraseIndex + 1) % phrases.length;
        }, 3000);
    }

    // Ä°lk Ã§alÄ±ÅŸma 4 sn sonra, sonra her 10 sn bir
    setTimeout(() => {
        showTooltip();
        setInterval(showTooltip, 10000);
    }, 4000);
</script>

<style>
    /* MasaÃ¼stÃ¼ Ã§ubuÄŸu iÃ§in gÃ¶lge efekti */
    #quick-action-bar-desktop {
        box-shadow: 0 15px 40px -10px rgba(0, 0, 0, 0.7);
    }

    /* YÃ¼zen buton animasyonu */
    @keyframes pulse-orange {
        0% {
            box-shadow: 0 0 0 0 rgba(234, 88, 12, 0.7);
        }
        70% {
            box-shadow: 0 0 0 15px rgba(234, 88, 12, 0);
        }
        100% {
            box-shadow: 0 0 0 0 rgba(234, 88, 12, 0);
        }
    }

    #hub-trigger {
        animation: pulse-orange 2s infinite;
    }

    /* Telefon Ã‡Ä±nlama Animasyonu */
    @keyframes phone-ring-animation {
        0% {
            transform: rotate(0);
        }
        5% {
            transform: rotate(15deg);
        }
        10% {
            transform: rotate(-15deg);
        }
        15% {
            transform: rotate(15deg);
        }
        20% {
            transform: rotate(-15deg);
        }
        25% {
            transform: rotate(10deg);
        }
        30% {
            transform: rotate(-10deg);
        }
        35% {
            transform: rotate(0);
        }
        100% {
            transform: rotate(0);
        }
    }

    .phone-ring {
        animation: phone-ring-animation 4s infinite;
    }
</style>
