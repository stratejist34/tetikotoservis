---
/**
 * QuickActionBar - Åžimdi "Aksiyon Merkezi" (Action Hub) Hibrit YapÄ±sÄ±
 *
 * ðŸ“Š TasarÄ±m Stratejisi:
 * - MasaÃ¼stÃ¼: Hero altÄ±nda statik, prestijli aksiyon barÄ±.
 * - Mobil: SaÄŸ altta yÃ¼zen (floating) premium buton + TÄ±klandÄ±ÄŸÄ±nda aÃ§Ä±lan ferah Aksiyon Merkezi.
 * - S21 FE gibi cihazlarda sÄ±kÄ±ÅŸÄ±klÄ±ÄŸÄ± Ã¶nlemek iÃ§in "Drawer / Bottom Sheet" mantÄ±ÄŸÄ±na geÃ§ildi.
 */
---

<!-- DESKTOP BAR: Sadece masaÃ¼stÃ¼ ve tabletlerde gÃ¶rÃ¼nÃ¼r -->
<div
    id="quick-action-bar-desktop"
    class="hidden md:block relative z-40 bg-slate-950/90 backdrop-blur-2xl border-y border-white/10"
>
    <div class="container mx-auto px-4 py-5">
        <div class="flex items-center justify-center gap-8">
            <!-- Motor ArÄ±zasÄ± -->
            <a
                href="https://wa.me/905336157835?text=Merhaba,%20aracÄ±mda%20bir%20arÄ±za%20uyarÄ±sÄ±%20var,%20arÄ±za%20tespiti%20iÃ§in%20randevu/bilgi%20almak%20istiyorum."
                target="_blank"
                class="quick-action-item group relative flex items-center gap-4 px-8 py-3.5 rounded-2xl bg-slate-900/60 border border-orange-500/40 hover:border-orange-500/80 transition-all duration-500 hover:-translate-y-1.5"
                data-action="Motor ArÄ±zasÄ±"
            >
                <div
                    class="w-11 h-11 bg-orange-500/30 rounded-xl flex items-center justify-center border border-orange-500/40 group-hover:scale-110 transition-all"
                >
                    <svg
                        class="w-6 h-6 text-orange-400"
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2.5"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        ><path
                            d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"
                        ></path></svg
                    >
                </div>
                <div class="flex flex-col items-start leading-tight">
                    <span
                        class="text-[10px] text-orange-400 font-button tracking-[0.2em] uppercase mb-0.5"
                        >ARIZA TESPÄ°T</span
                    >
                    <span
                        class="text-sm font-button tracking-widest text-white font-bold uppercase"
                        >Motor ArÄ±zasÄ±</span
                    >
                </div>
            </a>

            <!-- Periyodik BakÄ±m -->
            <a
                href="https://wa.me/905336157835?text=Merhaba,%20aracÄ±mÄ±n%20periyodik%20bakÄ±mÄ±%20(yaÄŸ/filtre)%20iÃ§in%20fiyat%20ve%20randevu%20bilgisi%20alabilir%20miyim?"
                target="_blank"
                class="quick-action-item group relative flex items-center gap-4 px-8 py-3.5 rounded-2xl bg-slate-900/60 border border-blue-500/40 hover:border-blue-500/80 transition-all duration-500 hover:-translate-y-1.5"
                data-action="Periyodik BakÄ±m"
            >
                <div
                    class="w-11 h-11 bg-blue-500/30 rounded-xl flex items-center justify-center border border-blue-500/40 group-hover:scale-110 transition-all"
                >
                    <svg
                        class="w-6 h-6 text-blue-400"
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2.5"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        ><path
                            d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"
                        ></path><circle cx="12" cy="12" r="3"></circle></svg
                    >
                </div>
                <div class="flex flex-col items-start leading-tight">
                    <span
                        class="text-[10px] text-blue-400 font-button tracking-[0.2em] uppercase mb-0.5"
                        >FULL KONTROL</span
                    >
                    <span
                        class="text-sm font-button tracking-widest text-white font-bold uppercase"
                        >Periyodik BakÄ±m</span
                    >
                </div>
            </a>

            <!-- Hemen Sor -->
            <a
                href="tel:05336157835"
                class="quick-action-item group relative flex items-center gap-4 px-8 py-3.5 rounded-2xl bg-slate-900/60 border border-green-500/40 hover:border-green-500/80 transition-all duration-500 hover:-translate-y-1.5"
                data-action="Hemen Sor"
            >
                <div
                    class="w-11 h-11 bg-green-500/30 rounded-xl flex items-center justify-center border border-green-500/40 group-hover:scale-110 transition-all"
                >
                    <svg
                        class="w-6 h-6 text-green-400"
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2.5"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        ><path
                            d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"
                        ></path></svg
                    >
                </div>
                <div class="flex flex-col items-start leading-tight">
                    <span
                        class="text-[10px] text-green-400 font-button tracking-[0.2em] uppercase mb-0.5"
                        >USTAYA BAÄžLAN</span
                    >
                    <span
                        class="text-sm font-button tracking-widest text-white font-bold uppercase"
                        >Hemen Sor</span
                    >
                </div>
            </a>
        </div>
    </div>
</div>

<!-- MOBILE HUB: Sadece mobil ve kÃ¼Ã§Ã¼k tabletlerde gÃ¶rÃ¼nÃ¼r -->
<div id="quick-action-hub-mobile" class="md:hidden">
    <!-- Dynamic Tooltip (KonuÅŸma Balonu) - SOLDA -->
    <div
        id="hub-tooltip"
        class="fixed bottom-24 left-4 bg-white text-slate-900 px-4 py-2 rounded-2xl text-[11px] font-bold shadow-2xl z-[46] opacity-0 translate-y-4 pointer-events-none transition-all duration-500 whitespace-nowrap border border-slate-100"
    >
        <span id="tooltip-text">Hemen Ara</span>
        <!-- Tooltip Ok Ä°ÅŸareti -->
        <div
            class="absolute bottom-[-6px] left-6 w-3 h-3 bg-white rotate-45 border-r border-b border-slate-100"
        >
        </div>
    </div>

    <!-- LEFT: Main Hub Trigger (Phone/Action) - "Pill" Shape with Text (Modern Boxy) -->
    <button
        id="hub-trigger"
        class="fixed bottom-3 left-4 h-14 bg-amber-500 text-slate-950 rounded-2xl shadow-[0_10px_30px_-10px_rgba(245,158,11,0.6)] border-2 border-amber-300/50 z-[45] flex items-center justify-center gap-3 px-6 transition-all duration-500 hover:scale-[1.02] active:scale-95 group overflow-hidden w-auto"
        aria-label="Aksiyon MenÃ¼sÃ¼nÃ¼ AÃ§"
    >
        <!-- Glossy Parlama Efekti -->
        <span
            class="absolute inset-0 w-full h-full bg-gradient-to-tr from-white/20 to-transparent skew-x-[-20deg] translate-x-[-150%] group-hover:translate-x-[150%] transition-transform duration-1000"
        ></span>

        <!-- Telefon Ä°konu -->
        <svg
            class="w-6 h-6 hub-icon-open phone-ring shrink-0"
            fill="currentColor"
            viewBox="0 0 24 24"
        >
            <path
                d="M3.478 2.405a.75.75 0 00-.926.94l2.432 7.905H13.5a.75.75 0 010 1.5H4.984l-2.432 7.905a.75.75 0 00.926.94 60.519 60.519 0 0018.445-8.986.75.75 0 000-1.218A60.517 60.517 0 003.478 2.405z"
                fill-rule="evenodd"
                clip-rule="evenodd"
                style="display:none"></path>
            <!-- Standard Solid Phone Icon (Heroicons Solid) -->
            <path
                fill-rule="evenodd"
                d="M1.5 4.5a3 3 0 013-3h1.372c.86 0 1.61.586 1.819 1.42l1.105 4.423a1.875 1.875 0 01-.694 1.955l-1.293.97c-.135.101-.164.249-.126.352a11.285 11.285 0 006.697 6.697c.103.038.25.009.352-.126l.97-1.293a1.875 1.875 0 011.955-.694l4.423 1.105c.834.209 1.42.959 1.42 1.82V19.5a3 3 0 01-3 3h-2.25C8.552 22.5 1.5 15.448 1.5 6.75V4.5z"
                clip-rule="evenodd"></path>
        </svg>

        <!-- CTA Text -->
        <span
            class="font-bold text-sm tracking-wide whitespace-nowrap hub-text-open"
            >HEMEN ARA</span
        >

        <!-- Kapat Ä°konu -->
        <svg
            class="w-8 h-8 hub-icon-close hidden"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
        >
            <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2.5"
                d="M6 18L18 6M6 6l12 12"></path>
        </svg>
    </button>

    <!-- RIGHT: Direct WhatsApp Button (Modern Boxy) -->
    <button
        id="hub-whatsapp-btn"
        class="fixed bottom-3 right-4 w-14 h-14 bg-[#25D366] text-white rounded-2xl shadow-[0_10px_30px_-10px_rgba(37,211,102,0.6)] border-2 border-[#4ce485]/50 z-[45] flex items-center justify-center transition-all duration-500 hover:scale-110 active:scale-95 group overflow-hidden"
        aria-label="WhatsApp'tan Yaz"
    >
        <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24">
            <path
                d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"
            ></path>
        </svg>
    </button>

    <script>
        // Region Modal Logic & Persistence
        const hubContainer = document.getElementById("quick-action-hub-mobile");
        const triggerPhone = document.getElementById("hub-trigger");
        const triggerWhatsapp = document.getElementById("hub-whatsapp-btn");

        const modal = document.getElementById("region-modal");
        const backdrop = document.getElementById("modal-backdrop");
        const content = document.getElementById("modal-content");
        const closeX = document.getElementById("modal-close-xf");
        const cancelBtn = document.getElementById("modal-cancel-btn");
        const callBtn = document.getElementById("modal-call-btn");

        let currentAction = "phone"; // 'phone' or 'whatsapp'

        // 4. Persistence check on load (Session Storage - Safer)
        // If they dismissed it in this session, hide it. But if they close tab/browser and return, it comes back.
        if (
            typeof sessionStorage !== "undefined" &&
            sessionStorage.getItem("region_dismissed") === "true"
        ) {
            if (hubContainer) {
                hubContainer.style.display = "none !important";
                hubContainer.classList.add("hidden");
            }
        }

        // 2. Dismiss Logic (Hide for this session)
        function dismissForSession() {
            if (typeof sessionStorage !== "undefined") {
                sessionStorage.setItem("region_dismissed", "true");
            }
            closeModal();

            // Immediate hide with animation attempt
            if (hubContainer) {
                hubContainer.style.pointerEvents = "none"; // Make unclickable immediately
                hubContainer.style.transition =
                    "opacity 0.5s ease, transform 0.5s ease";
                hubContainer.style.opacity = "0";
                hubContainer.style.transform = "translateY(20px)";

                setTimeout(() => {
                    hubContainer.style.display = "none";
                    hubContainer.classList.add("hidden");
                }, 500);
            }

            // Analytics
            if (typeof (window as any).gtag !== "undefined") {
                const eventName =
                    currentAction === "whatsapp"
                        ? "whatsapp_vazgecti"
                        : "tel_vazgecti";
                (window as any).gtag("event", eventName, {
                    reason: "user_cancelled_modal_session",
                });
            }
        }

        function openModal(source = "phone", destinationUrl = null) {
            if (!modal || !backdrop || !content) return;

            currentAction = source;

            // Update Button Text & Link
            if (callBtn) {
                // overrideUrl provided? Use it.
                // But we also need to respect the 'Mode' (phone vs whatsapp) for styling

                if (source === "whatsapp") {
                    callBtn.innerHTML = `
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"></path></svg>
                    BÃ¶lgedeyim, Mesaj Yaz
                `;
                    callBtn.classList.remove(
                        "bg-red-600",
                        "hover:bg-red-700",
                        "shadow-red-900/20",
                    );
                    callBtn.classList.add(
                        "bg-[#25D366]",
                        "hover:bg-[#128C7E]",
                        "shadow-[#25D366]/20",
                    );

                    // Use destination if provided, otherwise default
                    if (destinationUrl) {
                        callBtn.setAttribute("href", destinationUrl);
                    } else {
                        callBtn.setAttribute(
                            "href",
                            "https://wa.me/905336157835?text=Merhaba,%20servis%20hizmetleri%20hakkÄ±nda%20bilgi%20almak%20istiyorum.",
                        );
                    }
                } else {
                    // Phone Mode
                    callBtn.innerHTML = `
                    <svg class="w-5 h-5 phone-ring" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg>
                    BÃ¶lgedeyim, Hemen Ara
                `;
                    callBtn.classList.remove(
                        "bg-[#25D366]",
                        "hover:bg-[#128C7E]",
                        "shadow-[#25D366]/20",
                    );
                    callBtn.classList.add(
                        "bg-red-600",
                        "hover:bg-red-700",
                        "shadow-red-900/20",
                    );

                    // Use destination if provided, otherwise default
                    if (destinationUrl) {
                        callBtn.setAttribute("href", destinationUrl);
                    } else {
                        callBtn.setAttribute("href", "tel:05336157835");
                    }
                }
            }

            modal.classList.remove("hidden");
            // Force reflow
            void modal.offsetWidth;

            backdrop.classList.remove("opacity-0");
            content.classList.remove("scale-90", "opacity-0");
            content.classList.add("scale-100", "opacity-100");

            document.body.style.overflow = "hidden";

            // Push history state to handle Back Button
            window.history.pushState({ modalOpen: true }, "");

            // Analytics (Niyet Takibi)
            if (typeof (window as any).gtag !== "undefined") {
                const eventName =
                    source === "whatsapp"
                        ? "whatsapp_yazma_niyet"
                        : "tel_arama_niyeti";
                (window as any).gtag("event", eventName, {
                    source: source,
                });
            }
        }

        // Expose Global
        (window as any).openServiceRegionModal = openModal;

        function closeModal() {
            if (!modal || !backdrop || !content) return;

            backdrop.classList.add("opacity-0");
            content.classList.remove("scale-100", "opacity-100");
            content.classList.add("scale-90", "opacity-0");

            setTimeout(() => {
                modal.classList.add("hidden");
                document.body.style.overflow = "";
            }, 300);
        }

        // Handle Back Button
        window.addEventListener("popstate", (event) => {
            // If modal is open when user triggers Back, dismiss it
            if (modal && !modal.classList.contains("hidden")) {
                dismissForSession();
            }
        });

        triggerPhone?.addEventListener("click", (e) => {
            e.preventDefault();
            openModal("phone");
        });

        triggerWhatsapp?.addEventListener("click", (e) => {
            e.preventDefault();
            openModal("whatsapp");
        });

        // Dismiss Actions -> Hide For Session
        closeX?.addEventListener("click", dismissForSession);
        cancelBtn?.addEventListener("click", dismissForSession);
        backdrop?.addEventListener("click", (e) => {
            if (e.target === backdrop) dismissForSession();
        });

        // Call/Message Action -> Just allow functionality (Proceed)
        callBtn?.addEventListener("click", () => {
            if (typeof (window as any).gtag !== "undefined") {
                const eventName =
                    currentAction === "whatsapp"
                        ? "whatsapptan_yazanlar"
                        : "telefon_aramasi";
                (window as any).gtag("event", eventName, {
                    action_type: currentAction,
                });
            }
            // Let the link functionality proceed
            // If it's a tel: link, it might not navigate away, so we should close modal
            setTimeout(closeModal, 1000);
        });

        // TÄ±klama Takibi (MasaÃ¼stÃ¼ Bar iÃ§in - Mobil Hub artÄ±k yok)
        document.querySelectorAll(".quick-action-item").forEach((item) => {
            item.addEventListener("click", () => {
                const actionName = item.getAttribute("data-action");
                let eventName = "";

                // MasaÃ¼stÃ¼ Bar
                if (actionName === "Motor ArÄ±zasÄ±")
                    eventName = "masaustu_bar_ariza_tiklamasi";
                else if (actionName === "Periyodik BakÄ±m")
                    eventName = "masaustu_bar_bakim_tiklamasi";
                else if (actionName === "Hemen Sor")
                    eventName = "masaustu_bar_arama_tiklamasi";

                if (eventName && typeof (window as any).gtag !== "undefined") {
                    (window as any).gtag("event", eventName);
                }
            });
        });

        // DINAMIK TOOLTIP SISTEMI
        const tooltip = document.getElementById("hub-tooltip");
        const tooltipText = document.getElementById("tooltip-text");
        const phrases = [
            "BakÄ±m FiyatÄ± Al",
            "Ustaya Sor",
            "Tuzla - Gebze Ã–zel Servis",
        ];

        function showTooltip(index, duration = 3000) {
            if (!tooltip || !tooltipText) return;

            // Update text
            tooltipText.textContent = phrases[index];

            // Show
            tooltip.classList.remove("opacity-0", "translate-y-4");
            tooltip.classList.add("opacity-100", "translate-y-0");

            // Hide after duration
            setTimeout(() => {
                tooltip.classList.add("opacity-0", "translate-y-4");
                tooltip.classList.remove("opacity-100", "translate-y-0");
            }, duration);
        }

        // Zamanlama Senaryosu (KullanÄ±cÄ±yÄ± boÄŸmadan) - Tek Seferlik DÃ¶ngÃ¼
        // 1. Balon: 10sn sonra (Duration: 4sn)
        setTimeout(() => showTooltip(0, 4000), 10000);

        // 2. Balon: 1. bittikten 7sn sonra (10+4+7 = 21. saniyede) (Duration: 4sn)
        setTimeout(() => showTooltip(1, 4000), 21000);

        // 3. Balon: 2. bittikten 21sn sonra (21+4+21 = 46. saniyede) (Duration: 5sn - Son mesaj uzun)
        setTimeout(() => showTooltip(2, 5000), 46000);
    </script>

    <!-- Region & Service Warning Modal (Moved to Global Scope) -->
    <div
        id="region-modal"
        class="fixed inset-0 z-[99999] hidden"
        role="dialog"
        aria-modal="true"
    >
        <!-- Backdrop -->
        <div
            class="absolute inset-0 bg-slate-950/90 backdrop-blur-sm transition-opacity duration-300 opacity-0"
            id="modal-backdrop"
        >
        </div>

        <!-- Modal Content -->
        <div
            class="absolute inset-x-4 top-1/2 -translate-y-1/2 flex flex-col items-center justify-center pointer-events-none"
        >
            <div
                id="modal-content"
                class="w-full max-w-sm bg-[#0f172a] border border-white/10 rounded-3xl shadow-2xl overflow-hidden transform transition-all duration-300 scale-90 opacity-0 pointer-events-auto relative"
            >
                <!-- Close Button (Top Right) -->
                <button
                    id="modal-close-xf"
                    class="absolute top-4 right-4 z-10 text-slate-400 hover:text-white p-2"
                >
                    <svg
                        class="w-6 h-6"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                    >
                        <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>

                <!-- Header / Icon -->
                <div class="pt-8 pb-4 flex justify-center">
                    <div
                        class="w-20 h-20 rounded-full bg-red-900/20 flex items-center justify-center ring-4 ring-red-900/10"
                    >
                        <svg
                            class="w-10 h-10 text-red-500"
                            xmlns="http://www.w3.org/2000/svg"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                        >
                            <path
                                d="M12 22s-8-10.5-8-15a8 8 0 0 1 16 0c0 4.5-8 15-8 15z"
                            ></path>
                            <circle cx="12" cy="7" r="3"></circle>
                        </svg>
                    </div>
                </div>

                <div class="px-6 pb-2 text-center">
                    <h3 class="text-xl font-bold text-white mb-2">
                        Ã–nemli Bilgilendirme
                    </h3>
                    <p class="text-slate-400 text-sm leading-relaxed px-2">
                        Hizmet bÃ¶lgemiz sadece <strong class="text-white"
                            >Tuzla - Gebze - Pendik</strong
                        > ve Ã§evresidir.
                    </p>
                </div>

                <!-- Private Service Warning Box -->
                <div class="px-6 py-6">
                    <div
                        class="bg-white/5 border border-white/10 rounded-2xl p-4 text-center"
                    >
                        <p class="text-xs text-slate-400 mb-1">
                            Ä°ÅŸletmemiz markadan baÄŸÄ±msÄ±z
                        </p>
                        <p
                            class="text-lg font-bold text-red-500 tracking-wide uppercase"
                        >
                            Ã–ZEL SERVÄ°STÄ°R
                        </p>
                        <p class="text-[10px] text-slate-500 mt-1">
                            (Yetkili Servis DeÄŸildir)
                        </p>
                    </div>
                </div>

                <!-- Actions -->
                <div class="px-6 pb-8 space-y-3">
                    <a
                        href="tel:05336157835"
                        class="w-full flex items-center justify-center gap-3 bg-red-600 hover:bg-red-700 text-white font-bold py-4 rounded-xl transition-all active:scale-95 shadow-lg shadow-red-900/20"
                        id="modal-call-btn"
                    >
                        <svg
                            class="w-5 h-5 phone-ring"
                            fill="none"
                            stroke="currentColor"
                            viewBox="0 0 24 24"
                        >
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"
                            ></path>
                        </svg>
                        BÃ¶lgedeyim, Hemen Ara
                    </a>

                    <button
                        id="modal-cancel-btn"
                        class="w-full py-3 text-slate-500 font-medium text-sm hover:text-white transition-colors"
                    >
                        VazgeÃ§
                    </button>
                </div>
            </div>
        </div>
    </div>

    <style>
        /* MasaÃ¼stÃ¼ Ã§ubuÄŸu iÃ§in gÃ¶lge efekti */
        #quick-action-bar-desktop {
            box-shadow: 0 15px 40px -10px rgba(0, 0, 0, 0.7);
        }

        /* YÃ¼zen buton animasyonu */
        @keyframes pulse-amber {
            0% {
                box-shadow: 0 0 0 0 rgba(245, 158, 11, 0.7);
            }
            70% {
                box-shadow: 0 0 0 15px rgba(245, 158, 11, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(245, 158, 11, 0);
            }
        }

        #hub-trigger {
            animation: pulse-amber 2s infinite;
        }

        /* Telefon Ã‡Ä±nlama Animasyonu */
        @keyframes phone-ring-animation {
            0% {
                transform: rotate(0);
            }
            5% {
                transform: rotate(15deg);
            }
            10% {
                transform: rotate(-15deg);
            }
            15% {
                transform: rotate(15deg);
            }
            20% {
                transform: rotate(-15deg);
            }
            25% {
                transform: rotate(10deg);
            }
            30% {
                transform: rotate(-10deg);
            }
            35% {
                transform: rotate(0);
            }
            100% {
                transform: rotate(0);
            }
        }

        .phone-ring {
            animation: phone-ring-animation 4s infinite;
        }
    </style>
</div>
