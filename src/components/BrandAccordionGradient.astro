---
// Split Screen Design - Interactive Brand Showcase
const brands = [
  {
    id: 'hyundai',
    name: 'HYUNDAI',
    tagline: 'Özel Servis Hizmeti',
    image: '/images/Gebze Hyundai Servis.webp',
    description: 'i10, i20, Tucson, Elantra ve tüm Hyundai modelleri için yetkili servis kalitesinde bakım.',
    link: '/hyundai-ozel-servis',
    logo: '/images/logolar/hyundai.webp',
    stats: { cars: '500+', years: '17' },
    accent: 'blue',
    gradient: 'from-blue-600 to-blue-900'
  },
  {
    id: 'kia',
    name: 'KIA',
    tagline: 'Özel Servis Hizmeti',
    image: '/images/Kia Özel Servis Gebze Tuzla - Kia Ceed Servis.webp',
    description: 'Sportage, Picanto, Ceed, Stonic dahil tüm Kia modelleri için profesyonel bakım.',
    link: '/kia-ozel-servis',
    logo: '/images/logolar/kia.webp',
    stats: { cars: '350+', years: '17' },
    accent: 'orange',
    gradient: 'from-orange-600 to-red-900'
  },
  {
    id: 'toyota',
    name: 'TOYOTA',
    tagline: 'Hibrit Uzmanı',
    image: '/images/gebze toyota servis.jpg',
    description: 'Corolla, Yaris, C-HR ve tüm hibrit modeller için tam kapsamlı servis hizmeti.',
    link: '/toyota-ozel-servis',
    logo: '/images/logolar/toyota.webp',
    stats: { cars: '400+', years: '17' },
    accent: 'red',
    gradient: 'from-red-600 to-slate-900'
  },
  {
    id: 'nissan',
    name: 'NISSAN',
    tagline: 'CVT Şanzıman Uzmanı',
    image: '/images/Gebze Nissan Servis.jpg',
    description: 'Qashqai, Juke, Micra ve X-Trail için CVT şanzıman dahil tüm servis işlemleri.',
    link: '/nissan-ozel-servis',
    logo: '/images/logolar/nissan.webp',
    stats: { cars: '300+', years: '17' },
    accent: 'slate',
    gradient: 'from-slate-600 to-slate-900'
  }
];
---

<section class="relative bg-slate-950 overflow-hidden" id="brand-showcase">
  <!-- Background Grid Pattern -->
  <div class="absolute inset-0 opacity-[0.02]">
    <div class="absolute inset-0" style="background-image: linear-gradient(rgba(255,255,255,0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.1) 1px, transparent 1px); background-size: 80px 80px;"></div>
  </div>

  <div class="relative z-10 min-h-[700px] lg:min-h-[800px] flex flex-col lg:flex-row">
    
    <!-- LEFT SIDE - Brand Navigation -->
    <div class="lg:w-[45%] xl:w-[40%] bg-slate-950 relative z-20 py-16 lg:py-24 px-6 lg:px-12 xl:px-20">
      
      <!-- Section Header -->
      <div class="mb-12" data-reveal="fade-right">
        <span class="text-orange-500 font-bold tracking-widest uppercase text-sm">Uzmanlık Alanlarımız</span>
        <h2 class="text-4xl lg:text-5xl xl:text-6xl font-bold text-white mt-3 font-heading tracking-normal leading-tight">
          Marka<br/>
          <span class="text-transparent bg-clip-text bg-gradient-to-r from-orange-400 to-red-500">Servislerimiz</span>
        </h2>
      </div>

      <!-- Brand List -->
      <div class="space-y-2" id="brand-list">
        {brands.map((brand, index) => (
          <div 
            class={`brand-item group relative cursor-pointer transition-all duration-500 ${index === 0 ? 'is-active' : ''}`}
            data-brand={brand.id}
            data-index={index}
            data-reveal="fade-right"
            data-delay={index * 100}
          >
            <!-- Background Glow on Active -->
            <div class={`absolute inset-0 bg-gradient-to-r ${brand.gradient} opacity-0 group-[.is-active]:opacity-10 rounded-2xl transition-opacity duration-500`}></div>
            
            <div class="relative flex items-center gap-6 p-6 rounded-2xl border border-transparent group-[.is-active]:border-white/10 hover:border-white/5 transition-all">
              
              <!-- Logo -->
              <div class="relative flex-shrink-0">
                <div class={`absolute -inset-2 bg-${brand.accent}-500/20 rounded-xl blur-lg opacity-0 group-[.is-active]:opacity-100 transition-opacity duration-500`}></div>
                <div class="relative w-14 h-14 bg-white/95 rounded-xl flex items-center justify-center p-2 shadow-lg group-[.is-active]:scale-110 transition-transform duration-500">
                  <img src={brand.logo} alt={brand.name} class="w-full h-auto object-contain" />
                </div>
              </div>

              <!-- Text Content -->
              <div class="flex-1">
                <h3 class="text-2xl font-bold text-white/60 group-[.is-active]:text-white transition-colors duration-300 font-heading">
                  {brand.name}
                </h3>
                <p class="text-sm text-slate-500 group-[.is-active]:text-orange-400 transition-colors duration-300">
                  {brand.tagline}
                </p>
              </div>

              <!-- Arrow Indicator -->
              <div class="w-10 h-10 rounded-full bg-white/5 group-[.is-active]:bg-orange-500 flex items-center justify-center opacity-0 group-[.is-active]:opacity-100 transition-all duration-500 transform translate-x-4 group-[.is-active]:translate-x-0">
                <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                </svg>
              </div>

              <!-- Number Index -->
              <div class="absolute -left-4 top-1/2 -translate-y-1/2 text-6xl font-black text-white/[0.02] group-[.is-active]:text-white/[0.05] transition-colors duration-500 font-heading">
                0{index + 1}
              </div>
            </div>
          </div>
        ))}
      </div>

      <!-- Mobile Stats (visible on small screens) -->
      <div class="mt-8 pt-8 border-t border-slate-800 grid grid-cols-3 gap-4 lg:hidden">
        <div class="text-center">
          <div class="text-2xl font-bold text-white font-sans">1500+</div>
          <div class="text-xs text-slate-500 uppercase">Araç/Yıl</div>
        </div>
        <div class="text-center">
          <div class="text-2xl font-bold text-white font-sans">17</div>
          <div class="text-xs text-slate-500 uppercase">Yıl Tecrübe</div>
        </div>
        <div class="text-center">
          <div class="text-2xl font-bold text-white font-sans">4</div>
          <div class="text-xs text-slate-500 uppercase">Marka</div>
        </div>
      </div>
    </div>

    <!-- RIGHT SIDE - Brand Showcase -->
    <div class="lg:w-[55%] xl:w-[60%] relative min-h-[400px] lg:min-h-full">
      
      {/* Brand Images - Stacked */}
      {brands.map((brand, index) => (
        <div 
          class={`brand-image absolute inset-0 transition-all duration-700 ${index === 0 ? 'opacity-100 z-10' : 'opacity-0 z-0'}`}
          data-brand-image={brand.id}
        >
          <!-- Background Image -->
          <div class="absolute inset-0">
            <img 
              src={brand.image} 
              alt={brand.name}
              class="w-full h-full object-cover"
            />
            <div class={`absolute inset-0 bg-gradient-to-l ${brand.gradient} opacity-60`}></div>
            <div class="absolute inset-0 bg-gradient-to-t from-slate-950 via-transparent to-slate-950/50"></div>
          </div>

          <!-- Content Overlay -->
          <div class="absolute inset-0 flex flex-col justify-end p-8 lg:p-16">
            
            <!-- Stats Row -->
            <div class="hidden lg:flex gap-8 mb-8">
              <div>
                <div class="text-4xl font-bold text-white font-sans">{brand.stats.cars}</div>
                <div class="text-sm text-white/60 uppercase tracking-wider">Araç Servisi</div>
              </div>
              <div>
                <div class="text-4xl font-bold text-white font-sans">{brand.stats.years}</div>
                <div class="text-sm text-white/60 uppercase tracking-wider">Yıl Uzmanlık</div>
              </div>
            </div>

            <!-- Description -->
            <p class="text-white/80 text-lg max-w-lg mb-8 leading-relaxed hidden lg:block">
              {brand.description}
            </p>

            <!-- CTA Button -->
            <a 
              href={brand.link}
              class={`inline-flex items-center gap-3 bg-white hover:bg-${brand.accent}-500 text-slate-900 hover:text-white px-8 py-4 rounded-xl font-bold transition-all duration-300 w-fit group/cta`}
            >
              <span>Servisi İncele</span>
              <svg class="w-5 h-5 transform group-hover/cta:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
              </svg>
            </a>
          </div>

          <!-- Large Brand Name Watermark -->
          <div class="absolute top-1/2 right-8 lg:right-16 -translate-y-1/2 text-[8rem] lg:text-[12rem] xl:text-[16rem] font-black text-white/[0.03] leading-none tracking-tighter font-heading pointer-events-none select-none">
            {brand.name}
          </div>
        </div>
      ))}

      <!-- Gradient Edge (Left) -->
      <div class="absolute top-0 bottom-0 left-0 w-32 bg-gradient-to-r from-slate-950 to-transparent z-20 pointer-events-none hidden lg:block"></div>
    </div>

  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const brandItems = document.querySelectorAll('.brand-item');
    const brandImages = document.querySelectorAll('.brand-image');
    
    let currentIndex = 0;
    let autoplayInterval: ReturnType<typeof setInterval>;
    
    const switchBrand = (index: number) => {
      // Update active state on list items
      brandItems.forEach((item, i) => {
        if (i === index) {
          item.classList.add('is-active');
        } else {
          item.classList.remove('is-active');
        }
      });
      
      // Update visible image
      brandImages.forEach((img, i) => {
        if (i === index) {
          img.classList.remove('opacity-0', 'z-0');
          img.classList.add('opacity-100', 'z-10');
        } else {
          img.classList.remove('opacity-100', 'z-10');
          img.classList.add('opacity-0', 'z-0');
        }
      });
      
      currentIndex = index;
    };
    
    // Hover/Click handlers
    brandItems.forEach((item, index) => {
      // Desktop: Hover to change
      item.addEventListener('mouseenter', () => {
        clearInterval(autoplayInterval);
        switchBrand(index);
      });
      
      // Mobile: Click to change
      item.addEventListener('click', () => {
        clearInterval(autoplayInterval);
        switchBrand(index);
      });
    });
    
    // Restart autoplay when mouse leaves the section
    const section = document.getElementById('brand-showcase');
    section?.addEventListener('mouseleave', () => {
      startAutoplay();
    });
    
    // Autoplay function
    const startAutoplay = () => {
      autoplayInterval = setInterval(() => {
        const nextIndex = (currentIndex + 1) % brandItems.length;
        switchBrand(nextIndex);
      }, 4000); // 4 saniyede bir değiş
    };
    
    // Start autoplay on load
    startAutoplay();
  });
</script>

<style>
  .brand-item {
    transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .brand-image {
    transition: opacity 0.7s ease-in-out;
  }
  
  /* Ensure smooth image transitions */
  .brand-image img {
    transition: transform 0.7s ease-out;
  }
  
  .brand-image.opacity-100 img {
    transform: scale(1.02);
  }
</style>
